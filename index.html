diff --git a/index.html b/index.html
index 731212ccf7042a68dfbfea6c33811ac91a0ea2fc..6de3c813b1ebcbafa1471682578492cd883ca61f 100644
--- a/index.html
+++ b/index.html
@@ -1,109 +1,302 @@
 <!doctype html>
 <html lang="ja">
 <head>
-<meta charset="utf-8" />
-<meta name="viewport" content="width=device-width, initial-scale=1" />
-<title>Dojo (Stable)</title>
-<style>
-  body{margin:0;font-family:-apple-system,system-ui;background:#0f1220;color:#eaeaf0}
-  header{padding:12px;background:#171a2e;font-weight:800;display:flex;justify-content:space-between;align-items:center}
-  #editor{height:62vh}
-  #panel{padding:10px;background:#171a2e;border-top:1px solid rgba(255,255,255,.08)}
-  button{padding:8px 12px;border-radius:10px;border:1px solid rgba(255,255,255,.18);background:#4c6ef5;color:#fff;font-weight:800}
-  button.ghost{background:transparent}
-  #log{margin-top:10px;font-size:13px;white-space:pre-wrap;opacity:.9;line-height:1.35}
-</style>
-<script src="https://unpkg.com/monaco-editor@0.45.0/min/vs/loader.js"></script>
+  <meta charset="utf-8" />
+  <meta name="viewport" content="width=device-width, initial-scale=1" />
+  <title>Lua Local Script Playground</title>
+  <style>
+    :root {
+      color-scheme: dark;
+      --bg: #0b1020;
+      --panel: #141b33;
+      --line: rgba(255, 255, 255, 0.14);
+      --text: #e8ecff;
+      --accent: #5b8cff;
+      --accent-soft: rgba(91, 140, 255, 0.15);
+      --ok: #53d28c;
+      --warn: #f7bd42;
+    }
+    * { box-sizing: border-box; }
+    body {
+      margin: 0;
+      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
+      background: radial-gradient(1200px 500px at 20% -20%, #243160 0%, var(--bg) 50%);
+      color: var(--text);
+      min-height: 100vh;
+      display: grid;
+      grid-template-rows: auto 1fr auto;
+    }
+    header {
+      display: flex;
+      justify-content: space-between;
+      align-items: center;
+      gap: 12px;
+      padding: 14px 18px;
+      background: rgba(20, 27, 51, 0.88);
+      border-bottom: 1px solid var(--line);
+      position: sticky;
+      top: 0;
+      backdrop-filter: blur(8px);
+      z-index: 2;
+    }
+    h1 { margin: 0; font-size: 18px; letter-spacing: 0.3px; }
+    .status { font-size: 13px; font-weight: 700; color: var(--ok); }
+    main { display: grid; grid-template-columns: 1fr 320px; min-height: 0; }
+    .editor-wrap {
+      min-height: 64vh;
+      height: calc(100vh - 145px);
+      border-right: 1px solid var(--line);
+      background: #11172a;
+    }
+    #editor, #fallbackEditor {
+      width: 100%;
+      height: 100%;
+      display: block;
+    }
+    #fallbackEditor {
+      display: none;
+      border: 0;
+      outline: none;
+      resize: none;
+      padding: 14px;
+      background: #11172a;
+      color: #e9eeff;
+      font-family: ui-monospace, SFMono-Regular, Menlo, Consolas, monospace;
+      font-size: 14px;
+      line-height: 1.5;
+    }
+    aside {
+      background: rgba(20, 27, 51, 0.9);
+      padding: 14px;
+      display: flex;
+      flex-direction: column;
+      gap: 12px;
+    }
+    .help { margin: 0; font-size: 13px; line-height: 1.5; }
+    .buttons { display: grid; gap: 8px; }
+    button {
+      border: 1px solid transparent;
+      border-radius: 10px;
+      padding: 10px 12px;
+      background: var(--accent);
+      color: #fff;
+      font-size: 13px;
+      font-weight: 800;
+      cursor: pointer;
+      text-align: left;
+    }
+    button.ghost { background: transparent; border-color: var(--line); }
+    button.soft { background: var(--accent-soft); border-color: rgba(91, 140, 255, 0.45); }
+    .chips { display: flex; flex-wrap: wrap; gap: 6px; }
+    .chips button {
+      padding: 6px 10px;
+      border-radius: 999px;
+      background: transparent;
+      border: 1px solid var(--line);
+      font-size: 12px;
+    }
+    #log {
+      margin: 0;
+      padding: 10px;
+      border-radius: 10px;
+      border: 1px solid var(--line);
+      min-height: 70px;
+      font-size: 12px;
+      white-space: pre-wrap;
+    }
+    footer { border-top: 1px solid var(--line); padding: 9px 14px; font-size: 12px; opacity: 0.85; background: rgba(20, 27, 51, 0.88); }
+    @media (max-width: 900px) {
+      main { grid-template-columns: 1fr; }
+      .editor-wrap { height: 56vh; border-right: 0; }
+      aside { border-top: 1px solid var(--line); }
+    }
+  </style>
+  <script src="https://unpkg.com/monaco-editor@0.45.0/min/vs/loader.js"></script>
 </head>
 <body>
+  <header>
+    <h1>Lua Local Script Playground</h1>
+    <div id="status" class="status">loading...</div>
+  </header>
 
-<header>
-  <div>Dojo Stable</div>
-  <div id="status" style="opacity:.7;font-weight:700">loading...</div>
-</header>
-
-<div id="editor"></div>
-
-<div id="panel">
-  <button id="btnSuggest">補完を出す</button>
-  <button id="btnInsert" class="ghost">local を挿入</button>
-  <button id="btnReset" class="ghost">リセット</button>
-  <div id="log">ready.</div>
-</div>
-
-<script>
-// ===== 画面にエラー表示（iPhone用）=====
-window.onerror = function(msg, src, line, col){
-  const st = document.getElementById("status");
-  const log = document.getElementById("log");
-  if (st) st.textContent = "error";
-  if (log) log.textContent =
-    "JS ERROR:\n" + msg + "\n" + (src||"") + ":" + line + ":" + col;
-};
-
-// ===== 候補（localだけ）=====
-const LS_DB = [
-  { key:"local", desc:"Luaのlocalキーワード", code:"local " },
-];
-
-// ===== Monaco起動 =====
-require.config({ paths:{ vs:"https://unpkg.com/monaco-editor@0.45.0/min/vs" }});
-require(["vs/editor/editor.main"], function(){
-  const status = document.getElementById("status");
-  const log = document.getElementById("log");
-
-  try { monaco.languages.register({ id:"lua" }); } catch(e){}
-
-  const editor = monaco.editor.create(document.getElementById("editor"), {
-    value: "-- local と打ってみて\n\n",
-    language: "lua",
-    theme: "vs-dark",
-    minimap: { enabled:false },
-    fontSize: 14,
-    wordWrap: "on",
-    quickSuggestions: true,
-    suggestOnTriggerCharacters: true,
-    tabCompletion: "on"
-  });
-
-  // 補完登録（localだけ）
-  monaco.languages.registerCompletionItemProvider("lua", {
-    provideCompletionItems: () => ({
-      suggestions: LS_DB.map(it => ({
-        label: it.key,
-        kind: monaco.languages.CompletionItemKind.Keyword,
-        insertText: it.code,
-        documentation: it.desc
-      }))
-    })
-  });
-
-  // ボタン
-  document.getElementById("btnSuggest").onclick = ()=>{
-    try { editor.trigger("manual","editor.action.triggerSuggest",{}); } catch(e){}
-  };
-  document.getElementById("btnInsert").onclick = ()=>{
-    const p = editor.getPosition() || {lineNumber:1,column:1};
-    editor.executeEdits("ins", [{
-      range: new monaco.Range(p.lineNumber, p.column, p.lineNumber, p.column),
-      text: "local "
-    }]);
-    editor.focus();
-    log.textContent = "inserted: local";
-  };
-  document.getElementById("btnReset").onclick = ()=>{
-    editor.setValue("-- local と打ってみて\n\n");
-    editor.focus();
-    log.textContent = "reset";
-  };
-
-  // 最初に一回だけ補完を開く（iPhone対策）
-  setTimeout(()=>{ try { editor.trigger("auto","editor.action.triggerSuggest",{}); } catch(e){} }, 250);
-
-  if (status) status.textContent = "ready";
-  log.textContent = "OK：local が候補に出るはず。出なければ『補完を出す』を押して。";
-});
-</script>
+  <main>
+    <div class="editor-wrap">
+      <div id="editor"></div>
+      <textarea id="fallbackEditor" spellcheck="false"></textarea>
+    </div>
+    <aside>
+      <p class="help">スクリーンショットと同じ見た目になるよう、Monaco が読み込めない時は自動でフォールバックエディタを表示します。</p>
+      <div class="buttons">
+        <button id="btnSuggest">補完を開く（Monaco時のみ）</button>
+        <button id="btnInsert" class="soft">local function を挿入</button>
+        <button id="btnSample" class="ghost">サンプルを読み込む</button>
+        <button id="btnReset" class="ghost">リセット</button>
+      </div>
+      <div class="chips">
+        <button type="button" data-insert="local ">local</button>
+        <button type="button" data-insert="function ">function</button>
+        <button type="button" data-insert="end">end</button>
+      </div>
+      <pre id="log">準備中...</pre>
+    </aside>
+  </main>
 
+  <footer>Tip: Monacoが使えない環境でも textarea で必ず入力できます。</footer>
+
+  <script>
+    const INITIAL_CODE = `-- Lua local script を書いてみよう\n\nlocal message = "hello"\nprint(message)\n`;
+    const SAMPLE_CODE = `-- local function サンプル\nlocal function greet(name)\n  local text = "Hello, " .. name\n  return text\nend\n\nprint(greet("Lua"))\n`;
+    const SNIPPET = "local function name(args)\\n  -- body\\nend\\n";
+
+    const statusEl = document.getElementById("status");
+    const logEl = document.getElementById("log");
+    const fallbackEl = document.getElementById("fallbackEditor");
+
+    let editor = null;
+    let useFallback = false;
+
+    function setStatus(text, ok = true) {
+      statusEl.textContent = text;
+      statusEl.style.color = ok ? "var(--ok)" : "var(--warn)";
+    }
+
+    function getCode() {
+      return useFallback ? fallbackEl.value : editor.getValue();
+    }
+
+    function setCode(text) {
+      if (useFallback) {
+        fallbackEl.value = text;
+        fallbackEl.focus();
+      } else {
+        editor.setValue(text);
+        editor.focus();
+      }
+    }
+
+    function insertAtCursor(text) {
+      if (useFallback) {
+        const start = fallbackEl.selectionStart;
+        const end = fallbackEl.selectionEnd;
+        fallbackEl.setRangeText(text, start, end, "end");
+        fallbackEl.focus();
+        return;
+      }
+      const pos = editor.getPosition() || { lineNumber: 1, column: 1 };
+      editor.executeEdits("insert", [{
+        range: new monaco.Range(pos.lineNumber, pos.column, pos.lineNumber, pos.column),
+        text
+      }]);
+      editor.focus();
+    }
+
+    function enableFallback(reason) {
+      useFallback = true;
+      document.getElementById("editor").style.display = "none";
+      fallbackEl.style.display = "block";
+      fallbackEl.value = INITIAL_CODE;
+      setStatus("fallback ready", false);
+      logEl.textContent = `Monacoの読込に失敗したためフォールバック表示に切り替えました。\n理由: ${reason}`;
+    }
+
+    function setupButtons() {
+      document.getElementById("btnSuggest").onclick = () => {
+        if (useFallback) {
+          logEl.textContent = "フォールバックモードでは補完UIは使えません。下の単語ボタンを使ってください。";
+          return;
+        }
+        editor.trigger("manual", "editor.action.triggerSuggest", {});
+        logEl.textContent = "補完候補を開きました。";
+      };
+
+      document.getElementById("btnInsert").onclick = () => {
+        insertAtCursor(SNIPPET);
+        logEl.textContent = "local function スニペットを挿入しました。";
+      };
+
+      document.getElementById("btnSample").onclick = () => {
+        setCode(SAMPLE_CODE);
+        logEl.textContent = "サンプルコードを読み込みました。";
+      };
+
+      document.getElementById("btnReset").onclick = () => {
+        setCode(INITIAL_CODE);
+        logEl.textContent = "初期コードに戻しました。";
+      };
+
+      document.querySelectorAll("[data-insert]").forEach((button) => {
+        button.onclick = () => {
+          insertAtCursor(button.dataset.insert || "");
+          logEl.textContent = `挿入: ${button.dataset.insert}`;
+        };
+      });
+    }
+
+    function setupMonaco() {
+      const completions = [
+        { label: "local", kind: "Keyword", insertText: "local ", detail: "ローカル変数・関数を宣言" },
+        { label: "local function", kind: "Snippet", insertText: "local function ${1:name}(${2:args})\\n  ${3:-- body}\\nend", detail: "ローカル関数テンプレート" },
+        { label: "function", kind: "Keyword", insertText: "function ", detail: "関数キーワード" },
+        { label: "end", kind: "Keyword", insertText: "end", detail: "ブロック終端" }
+      ];
+
+      try { monaco.languages.register({ id: "lua" }); } catch (_) {}
+
+      editor = monaco.editor.create(document.getElementById("editor"), {
+        value: INITIAL_CODE,
+        language: "lua",
+        theme: "vs-dark",
+        minimap: { enabled: false },
+        fontSize: 14,
+        lineNumbersMinChars: 3,
+        wordWrap: "on",
+        quickSuggestions: true,
+        suggestOnTriggerCharacters: true,
+        tabCompletion: "on",
+        automaticLayout: true
+      });
+
+      monaco.languages.registerCompletionItemProvider("lua", {
+        provideCompletionItems: () => ({
+          suggestions: completions.map((item) => ({
+            label: item.label,
+            kind: monaco.languages.CompletionItemKind[item.kind],
+            insertText: item.insertText,
+            insertTextRules: item.kind === "Snippet"
+              ? monaco.languages.CompletionItemInsertTextRule.InsertAsSnippet
+              : undefined,
+            detail: item.detail
+          }))
+        })
+      });
+
+      setStatus("ready");
+      logEl.textContent = "準備完了。local を入力して補完を試してください。";
+      setTimeout(() => editor.trigger("auto", "editor.action.triggerSuggest", {}), 250);
+    }
+
+    window.onerror = function (msg, src, line, col) {
+      if (!useFallback) {
+        enableFallback(`${msg} (${src || "inline"}:${line}:${col})`);
+      }
+    };
+
+    setupButtons();
+
+    function bootMonacoOrFallback() {
+      if (!window.require) {
+        enableFallback("require loader が利用できませんでした");
+        return;
+      }
+      try {
+        require.config({ paths: { vs: "https://unpkg.com/monaco-editor@0.45.0/min/vs" } });
+        require(["vs/editor/editor.main"], setupMonaco, () => enableFallback("Monaco module のロード失敗"));
+      } catch (e) {
+        enableFallback(e.message || "Monaco 初期化失敗");
+      }
+    }
+
+    bootMonacoOrFallback();
+  </script>
 </body>
 </html>

